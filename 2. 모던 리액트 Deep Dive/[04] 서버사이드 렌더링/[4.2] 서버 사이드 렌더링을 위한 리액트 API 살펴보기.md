### 2. 서버 사이드 렌더링을 위한 리액트 API 살펴보기

- react-dom/server.js 에서 서버사이드 렌더링에 사용되는 API를 확인 가능

1. renderToString
    - 인수로 넘겨받은 리액트 컴포넌트를 렌더링해 HTML 문자열로 반환하는 함수
    - 리액트 훅이나 이벤트 핸들러는 결과물에 포함되지 않는다
    - **리액트의 서버사이드 렌더링은 최초 HTML 페이지를 빠르게 그리는 것에 목적**이 있다.
    - `div#root`에 존재하는 속성인 `data-reactroot`는 자바스크립트를 실행하기 위한 hydrate함수에서 루트를 식별하는 기준점

<br />

2. renderToStaticMarkup
    - renderToString과 차이점은 `data-reactroot` 와 같은 리액트에서만 사용하는 추가적인 DOM 속성을 만들지 않는다.
        
        → hydrate를 수행하지 않기 때문에 순수한 HTML만 반환
        
        → 결과물인 HTML의 크기를 아주 약간이라도 줄일 수 있음
        
    - hydrate를 수행하지 않는 블로그 글이나 상품의 약관 정보와 같은 브라우저 액션이 없는 정적인 페이지에 유용

<br />

    
3. renderToNodeStream
    - renderToString 와 결과물은 동일하나 두가지 차이점이 존재
        1. renderToNodeStream 은 완전히 Node.js 환경에 의존적임
            
            renderToString, renderToStaticMarkup는 브라우저에서 실행 될 일은 없지만 실행은 가능하나 renderToNodeStream는 브라우저에서 실행 불가
            
        2. renderToString의 결과물은 string, renderToNodeStream의 결과물은 utf-8로 인코딩된 바이트 스트림으로 Nodejs와 같은 서버 환경에서만 사용
    - renderToNodeStream가 필요한 이유?
        - stream: 큰 데이터를 작은 단위로 분할(chunk)해 조금씩 가져오는 방식
            
            예) 영상 로딩            
        - HTML 결과물의 크기가 큰 경우에 작은단위로 분리해 순차적으로 처리할 수 있다.

<br />

    
4. renderToStaticNodeStream
    - 결과물은 renderToNodeStream 와 동일하나 hydrate를 할 필요 없는 순수 HTML 결과물이 필요할 때 사용

<br />


5. hydrete
    - renderToString 나 renderToNodeStream 으로 생성된 THML 결과물에 자바스크립트 이벤트나 핸들러를 붙이는 역할
    - render와 hydrate의 차이
        - render는 실행되었을 때, HTML결과물 생성 후 해당 컴포넌트를 렌더링하며 이벤트 핸들러를 붙이는 작업을 한 번에 수행
        - hydrate는 HTML 결과물이 존재한다는 가정하에 작업이 수행
            
            정적인 HTML 결과물을 인수로 넘겨주지 않는다면 서버에서 렌더링한 정보가 없기 때문에 실제 정보와 불일치 하여 에러가 노출되지만 hydrate 하는 과정에서 렌더링이 한 번 더 발생하기 때문에 정상적으로 웹페이지가 만들어진다. 하지만 이것은 올바른 사용법은 아니며 사실상 서버와 클라이언트에서 두 번 렌더링 하는 것이기 때문에 서버사이드 렌더링의 이점이 상실된다.
            

<br />


6. [서버 사이드 렌더링 예제 프로젝트](./practice)
