### 1. 크롬 개발자 도구

- 시크릿 모드에서 디버깅을 하자. 브라우저 확장 프로그램이 디버깅하는 것에 방해가 될 수 있기 때문이다. 시크릿 모드에서도 실행될 수 있는 확장 프로그램이 있다면 꺼두거나 삭제하고 디버깅을 하자

### 2.  Elements

- 웹을 구성하고 있는 HTML, CSS 등의 정보를 확인할 수 있다.
- 수정하고 싶은 요소를 더블 클릭해 DOM을 직접 수정하여 개발된 페이지에 수정된 내용이 어떻게 보이는지 미리 확인할 수 있고, 개발모드에서도 핫 리로딩을 거치지 않고 확인이 가능하여 빠른 개발이 가능하다.
- 중단 위치를 선택하여 디버깅하면 그 위치에 관련된 작업이 실행될 때 마다 브라우저가 렌더링을 중단하고 해당 요소 변경을 일으킨 소스코드를 보여준다.

### 3. Sources

- 웹 애플리케이션을 불러오기 위해 실행하거나 참조된 모든 파일을 확인할 수 있다.
- 이 탭에서도 소스 중단점을 생성해 디버깅을 수행할 수 있는데, 코드에 `debugger`를 선언하는 것과 동일한 역활을 하지만 소스코드를 오염시키지 않아 더 유용하다고 볼 수 있다.
- 사용중인 라이브러리에서 버그가 의심되는 지점을 디버깅하거나 실제로 소스코드상에서 어떻게 동작하는지 확인하고 싶을 때 유용하다.
- 감시메뉴에 변수를 추가해 실제 변숫값을 확인한다면 굳이 `console.log`로 디버깅 할 필요가 없음
- 자바스크립트가 실행되고 있지만 파일에서는 확인할 수 없는 스코프, 호출 스택과 같은 구조도 확인하기 용이함

### 4. Network

- 해당 웹페이지를 접속하는 순간부터 발생하는 모든 네트워크 관련 작동이 기록
- 같은 주소의 요청이 두번 실행되는 경우는 대부분 잘못된 useEffect의 사용으로 발생하는 문제이다. 이처럼 리엑트 코드에 문제가 있는 경우도 확인할 수 있다.
- 하단에 페이지를 불러오는 기간 동안 발생한 총 요청 건수와 총 다운로드 한 업로드 리소스 크기를 확인할 수 있는데, 이 비용을 줄이는 것이 중요하다.
- 네트워크 탭에서 중요하게 살펴봐야할 것은 다음의 네가지의 경우이다.
    - 불필요한 요청 또는 중복된 요청이 없는지
    - 웹페이지 구성에 필요한 리소스 크기가 너무 크지 않은지
    - 리소스를 불러오는 속도가 적절한지, 오래걸리는 것은 없는지
    - 리소스가 올바른 우선순위로 다운로드되어 자연스럽게 만들어지는지

### 5. Memory

- 크롬 개발자 도구에서 제공하는 도구 중 가장 난이도가 높음
- 애플리케이션에서 발생하는 메모리 누수, 속도 저하, 웹페이지 프리징 현상 등을 확인할 수 있다.
- **힙 스냅샷**: 현재 메모리 상황을 사진 찍듯이 촬영할 수 있으며 현재 시점의 메모리 상황을 알고 싶을 때 사용한다.
    - 얕은 크기: 객체 자체가 보유하는 메모리 바이트의 크기
    - 유지된 크기: 객체가 참조하고 있는 모든 객체들의 크기
    - **메모리 누수를 찾을 때는 얕은 크기는 작으나 유지된 크기가 큰 객체**를 찾아야한다. 두 크기의 차이가 큰 객체는 다수의 객체를 참조하고 있다는 뜻이며 이는 복잡한 참조관계를 가진다는 것을 의미하기 때문이다. 그리고 이러한 객체가 오랜 시간 메모리에 남아있다면 많은 메모리를 점유하고 있을 가능성이 높다.
    - 스냅샷을 활용하면 useMemo나 useCallback과 같은 의존성 있는 값들이 렌더링 사이에서 정상적으로 동작하는지 직접 확인할 수 있다.
- **타임라인의 할당 계측**: 현재 시점의 메모리 상황이 아닌, 시간의 흐름에 따라 메모리의 변화를 살펴보고 싶을 때 사용한다. 주로 로딩이 되는 과정의 메모리 변화 또는 페이지에서 어떠한 상호작용을 했을 때의 메모리의 변화를 보고싶을 때 사용
- **할당 샘플링:** 메모리 공간을 차지하고 있는 자바스크립트 함수를 볼 수 있음. 시간의 흐름에 따라 발생하는 메모리 점유를 확인한다는 점에서는 타임라인 할당 계측과 비슷하지만 자바스크립트 실행 스택별로 분석할 수 있고, 이 분석을 함수 단위로 한다는 차이점이 있다.
- **자바스크립트 VM 인스턴스 선택:** 메모리에서 가상머신 인스턴스를 선택할 수 있음. 메모리 현황을 알고 싶은 인스턴스를 선택할 수 있다.

### 6. Next.js 환경 디버깅

- 서버 사이드 렌더링을 수행하는 자바스크립트 환경에서 메모리 누수가 발생한다면? → 서버 자체에 부담이 발생
- Next.js도 크롬 개발자 도구로 디버깅이 가능하다.
- 오픈소스 도구인 ab를 사용하여 트래픽을 유발시켜 `getServerSideProps`를 이용하여 메모리 누수 지점을 확인
    - 메모리 탭에서 메모리 변화를 살펴봄
    - `getServerSideProps` 는 페이지 접근 요청이 있을 때마다 실행되는 함수이기 때문에 최대한 부수 효과가 없는 순수 함수로 만들어야 한다. 이 함수 내부에 외부 스코프의 변수에 의존하는 작업을 한다면 메모리 누수 상황을 마주할 수 있다.
